/**
 * Policies Applied:
 * - Policy 11.1: MCP-First for Claude Tools
 * - Policy 3.17: Code documentation
 */

name: "mcp-episodic-memory"
description: "Episodic memory MCP for searching past conversations, patterns, and learnings"
version: "1.0.0"
type: "mcp"

mcp_config:
  server_name: "episodic-memory"
  prefix: "mcp__plugin_episodic-memory_episodic-memory__"
  auto_detect: true
  priority: 12

hooks:
  - name: "search-conversations"
    description: "Search past conversations for relevant context and solutions"
    mcp_tools:
      - "search"
    inputs:
      - "query"
      - "mode: semantic | text"
      - "limit"
    outputs:
      - "relevant_conversations"
      - "patterns_found"
      - "solutions_used"
    workflow_phases:
      - "load-context"
      - "plan"
    validation:
      mandatory: false

  - name: "recall-patterns"
    description: "Recall patterns from similar past implementations"
    mcp_tools:
      - "search"
    inputs:
      - "task_description"
      - "mode: semantic"
    outputs:
      - "similar_tasks"
      - "patterns_learned"
      - "recommendations"
    workflow_phases:
      - "load-context"
      - "brainstorm"
      - "plan"
    validation:
      mandatory: false

  - name: "recall-decisions"
    description: "Recall architectural decisions and their rationale"
    mcp_tools:
      - "search"
    inputs:
      - "decision_context"
    outputs:
      - "past_decisions"
      - "rationale"
      - "outcomes"
    workflow_phases:
      - "brainstorm"
      - "plan"
    validation:
      mandatory: false

  - name: "recall-bugs"
    description: "Search for similar bugs fixed in the past"
    mcp_tools:
      - "search"
    inputs:
      - "bug_description"
      - "error_message"
    outputs:
      - "similar_bugs"
      - "fixes_applied"
      - "root_causes"
    workflow_phases:
      - "load-context"
      - "systematic-debugging"
    validation:
      mandatory: false

capabilities:
  - "conversation-search"
  - "pattern-recall"
  - "decision-recall"
  - "bug-recall"
  - "learning-retrieval"

auto_triggers:
  keywords:
    - trigger: ["remember", "past", "previous", "history", "before"]
      hooks: ["search-conversations"]
      mandatory: false
    - trigger: ["similar", "pattern", "like before"]
      hooks: ["recall-patterns"]
      mandatory: false
    - trigger: ["decision", "why did we", "rationale"]
      hooks: ["recall-decisions"]
      mandatory: false
    - trigger: ["bug", "error", "issue", "seen this before"]
      hooks: ["recall-bugs"]
      mandatory: false

integration_with_policies:
  - policy: "11.2"
    enforcement: "OPTIONAL"
    description: "Episodic memory helps identify opportunities and patterns"
    violations_fail_workflow: false

notes: "Episodic memory is always OPTIONAL - provides helpful context but never blocks workflow"
